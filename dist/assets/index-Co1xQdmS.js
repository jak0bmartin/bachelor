var u=Object.defineProperty;var c=(l,e,t)=>e in l?u(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var i=(l,e,t)=>c(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();var n=(l=>(l.TROPHY="Trophy",l.TERMINATOR="Terminator",l.MARIE="Marie",l))(n||{});const h={MsPerQuestion:1e4,totalQuestions:10},m=[{id:1,text:"Welches chemische Element ist Natrium?",options:[{id:1,text:"Gasförmiges Nichtmetall"},{id:2,text:"Edelgas"},{id:3,text:"Metall"}],correctOptionId:3},{id:2,text:"Welche Aussage über Edelgase trifft zu?",options:[{id:1,text:"Sie sind sehr reaktiv."},{id:2,text:"Sie sind weitgehend reaktionsträge."},{id:3,text:"Sie sind nur in festen Verbindungen stabil."}],correctOptionId:2},{id:3,text:'Wofür steht das chemische Symbol "O"?',options:[{id:1,text:"Osmium"},{id:2,text:"Sauerstoff"},{id:3,text:"Oxalat"}],correctOptionId:2},{id:4,text:"Welche Eigenschaft trifft auf Metalle typischerweise zu?",options:[{id:1,text:"Sie leiten Wärme gut."},{id:2,text:"Sie sind leicht entzündlich."},{id:3,text:"Sie reagieren nie mit Sauerstoff."}],correctOptionId:1},{id:5,text:"Welche Aussage beschreibt ein Ion korrekt?",options:[{id:1,text:"Ein Atom ohne Protonen."},{id:2,text:"Ein Atom oder Molekül mit elektrischer Ladung."},{id:3,text:"Ein Molekül, das keine Elektronen besitzt."}],correctOptionId:2},{id:6,text:"Was beschreibt die Ordnungszahl eines Elements?",options:[{id:1,text:"Die Elektronenzahl im Atomkern."},{id:2,text:"Die Neutronenzahl im Atomkern."},{id:3,text:"Die Protonenzahl im Atomkern."}],correctOptionId:3},{id:7,text:"Was versteht man unter einer chemischen Verbindung?",options:[{id:1,text:"Eine Mischung aus zwei beliebigen Stoffen."},{id:2,text:"Einen Stoff aus Atomen verschiedener Elemente."},{id:3,text:"Ein einzelnes Atom in reiner Form."}],correctOptionId:2},{id:8,text:"Welche Aggregatzustände treten in der Natur häufig auf?",options:[{id:1,text:"Fest, flüssig, gasförmig"},{id:2,text:"Plasma, flüssig, amorph"},{id:3,text:"Kristallin, ionisiert, wässrig"}],correctOptionId:1},{id:9,text:"Was passiert bei einer exothermen Reaktion?",options:[{id:1,text:"Es wird Energie freigesetzt."},{id:2,text:"Energie wird vollständig gespeichert."},{id:3,text:"Elektronen werden zerstört."}],correctOptionId:1},{id:10,text:"Welche Aussage über Elektronen trifft zu?",options:[{id:1,text:"Sie besitzen eine positive Ladung."},{id:2,text:"Sie besitzen eine negative Ladung."},{id:3,text:"Sie besitzen keine Masse."}],correctOptionId:2}];class E{constructor(){i(this,"currentCorrectAnswerCount",0)}applyAnswer(e,t){e&&t==="TEST"&&this.currentCorrectAnswerCount++}getScoreCount(){return this.currentCorrectAnswerCount}getScorePercent(){return this.currentCorrectAnswerCount/h.totalQuestions}reset(){this.currentCorrectAnswerCount=0}}class p{constructor(e,t=()=>Date.now()){i(this,"questionStartedAt",0);this.MsPerQuestion=e,this.now=t}startQuestionTimer(){this.questionStartedAt=this.now()}reStartQuesionTimer(){this.startQuestionTimer()}hasTimeLeft(){return this.getRemainingMs()>0}getRemainingMs(){if(!this.questionStartedAt)return this.MsPerQuestion;const e=this.now()-this.questionStartedAt,t=this.MsPerQuestion-Math.floor(e);return Math.max(0,t)}getRemainingFraction(){if(!this.questionStartedAt)return 1;const e=this.now()-this.questionStartedAt,s=(this.MsPerQuestion-e)/this.MsPerQuestion;return Math.max(0,Math.min(1,s))}}const f={[n.TROPHY]:{label:"Trophy",introText:"Fülle die Trophäe…"},[n.TERMINATOR]:{label:"Terminator",introText:"Halte den Terminator auf…",images:["/bachelor/assets/terminator.png"]},[n.MARIE]:{label:"Marie Curie",introText:"Gewinne Maries Vertrauen…",marieImages:{sauer:"/bachelor/assets/sauer.gif",enttäuscht:"/bachelor/assets/enttäuscht.gif",neutral:"/bachelor/assets/neutral.gif",zufrieden:"/bachelor/assets/zufrieden.gif",strahlend:"/bachelor/assets/strahlend.gif"}}};class g{constructor(e=document){i(this,"positiv",new Audio("/bachelor/assets/positiver.mp3"));i(this,"motivatorThemes");i(this,"startButtonEl");i(this,"questionEl");i(this,"answersEl");i(this,"timeBarFillEl");i(this,"timeBarEl");i(this,"phaseLabelEl");i(this,"questionIndexEl");i(this,"gameOverEl");i(this,"skipLearnButtonEl");i(this,"replayButtonEl");i(this,"leftPanelEl");i(this,"explainTextEl");i(this,"explainShellEl");i(this,"rightPanelEl");i(this,"marieImageEl");i(this,"terminatorWrapperEl");i(this,"bronzeMedalEl");i(this,"silverMedalEl");i(this,"goldMedalEl");i(this,"leftPipeEl");i(this,"rightPipeEl");i(this,"pressPlateEl");i(this,"terminatorEl");i(this,"explosionVideoEl");i(this,"gameModeSimpleButtonEl");i(this,"gameModeTerminatorButtonEl");i(this,"gameModeMarieButtonEl");i(this,"gameShellEl");i(this,"menuShellEl");i(this,"scoreSectionEl");i(this,"gameHeaderEl");i(this,"medalsContainerEl");i(this,"currentAnswerButtons",[]);i(this,"lastTimerSeconds",null);i(this,"currentMood",null);i(this,"gameStart",!0);i(this,"performanceRecord",400);i(this,"goUp",!0);i(this,"isBlured",!1);i(this,"onAnswerSelected");i(this,"onSkipLearn");i(this,"onGameModeSelected");i(this,"onReplay");i(this,"onStartButtonClicked");const t=s=>{const r=e.getElementById(s);if(!r)throw new Error(`DomView: Missing DOM element #${s}`);return r};this.motivatorThemes=f,this.questionEl=t("question-text"),this.answersEl=t("answers"),this.timeBarFillEl=t("time-bar-fill"),this.timeBarEl=t("time-bar"),this.phaseLabelEl=t("phase-label"),this.questionIndexEl=t("question-index-label"),this.gameOverEl=t("game-over"),this.skipLearnButtonEl=t("skip-learn-button"),this.replayButtonEl=t("replay-button"),this.startButtonEl=t("start-button"),this.gameModeSimpleButtonEl=t("game-mode-simple"),this.gameModeTerminatorButtonEl=t("game-mode-terminator"),this.gameModeMarieButtonEl=t("game-mode-marie"),this.gameShellEl=t("game-shell"),this.menuShellEl=t("menu-shell"),this.leftPanelEl=t("left-panel"),this.scoreSectionEl=t("score-section"),this.gameHeaderEl=t("game-header"),this.medalsContainerEl=t("medals-container"),this.marieImageEl=t("mood-image"),this.terminatorWrapperEl=t("terminator-wrapper"),this.bronzeMedalEl=t("bronze-medal"),this.silverMedalEl=t("silver-medal"),this.goldMedalEl=t("gold-medal"),this.leftPipeEl=t("pipe-left"),this.rightPipeEl=t("pipe-right"),this.pressPlateEl=t("press-plate"),this.terminatorEl=t("terminator"),this.explosionVideoEl=t("explosion-video"),this.replayButtonEl.onclick=()=>{var s;return(s=this.onReplay)==null?void 0:s.call(this)},this.skipLearnButtonEl.onclick=()=>{var s;return(s=this.onSkipLearn)==null?void 0:s.call(this)},this.gameModeSimpleButtonEl.onclick=()=>{var s;return(s=this.onGameModeSelected)==null?void 0:s.call(this,n.TROPHY)},this.gameModeTerminatorButtonEl.onclick=()=>{var s;return(s=this.onGameModeSelected)==null?void 0:s.call(this,n.TERMINATOR)},this.gameModeMarieButtonEl.onclick=()=>{var s;return(s=this.onGameModeSelected)==null?void 0:s.call(this,n.MARIE)},this.startButtonEl.onclick=()=>{var s;return(s=this.onStartButtonClicked)==null?void 0:s.call(this)},this.replayButtonEl.classList.add("hidden"),this.explainTextEl=t("explain-text"),this.explainShellEl=t("explain-shell"),this.rightPanelEl=t("right-panel")}setAnswerHandler(e){this.onAnswerSelected=e}renderGameShell(e){this.gameShellEl.classList.remove("hidden"),this.menuShellEl.classList.add("hidden"),this.renderMotivator(0,e),this.renderScoreBlocks(h.totalQuestions),this.replayButtonEl.classList.add("hidden"),this.renderPlaceholderAnswers()}renderPlaceholderAnswers(){this.answersEl.innerHTML="",this.currentAnswerButtons=[],["Antwort A","Antwort B","Antwort C"].forEach(t=>{const s=document.createElement("button");s.className="answer-button",s.textContent=t,s.disabled=!0,this.answersEl.appendChild(s),this.currentAnswerButtons.push(s)})}renderExplainShell(e){e==n.TERMINATOR?this.renderTerminatorExplainShell():e==n.MARIE?this.renderMarieExplainShell():e==n.TROPHY&&this.renderTrophyExplainShell()}renderMarieExplainShell(){this.explainShellEl.classList.remove("hidden"),this.leftPanelEl.style.filter="blur(10px)",this.rightPanelEl.style.filter="blur(10px)",this.startButtonEl.classList.remove("hidden")}renderTrophyExplainShell(){this.explainShellEl.classList.remove("hidden"),this.leftPanelEl.style.filter="blur(10px)",this.rightPanelEl.style.filter="blur(10px)",this.startButtonEl.classList.remove("hidden")}renderTerminatorExplainShell(){this.explainShellEl.classList.remove("hidden"),this.leftPanelEl.style.filter="blur(10px)",this.rightPanelEl.style.filter="blur(10px)",this.renderNewExplainText("Hallo Spieler!");const e=4e3;setTimeout(()=>{this.renderNewExplainText("Es liegt an dir den Terminator zu besiegen!")},e),setTimeout(()=>{this.renderNewExplainText("Du hast es bereits geschafft ihn in eine Schrottpresse zu locken."),this.rightPanelEl.style.filter="blur(0px)"},e*2),setTimeout(()=>{this.renderNewExplainText("Jetzt muss die Presse ihn nur noch zerquetschen...")},e*3),setTimeout(()=>{this.renderNewExplainText("Um die Presse zu betätigen, musst du die richtige Antworten auf die Fragen kennen."),this.leftPanelEl.style.filter="blur(0px)"},e*4),setTimeout(()=>{this.renderNewExplainText("Es handelt sich um Chemie-Fragen.")},e*5),setTimeout(()=>{this.renderNewExplainText("Das Spiel ist in zwei Phasen unterteilt: Lernphase und Prüfphase.")},e*6),setTimeout(()=>{this.renderNewExplainText("In der Lernphase kannst du die Fragen durchlesen und die Antworten üben.")},e*7),setTimeout(()=>{this.renderNewExplainText("In der Prüfphase musst du die Fragen beantworten und die Zeit beachten.")},e*8),setTimeout(()=>{this.renderNewExplainText("Viel Glück!")},e*9),setTimeout(()=>{this.leftPanelEl.style.filter="blur(10px)",this.rightPanelEl.style.filter="blur(10px)",this.renderNewExplainText(""),this.startButtonEl.classList.remove("hidden")},e*10)}renderEndExplainShell(){this.leftPanelEl.style.filter="blur(0px)",this.rightPanelEl.style.filter="blur(0px)",this.renderNewExplainText(""),this.explainShellEl.classList.add("hidden")}renderScoreBlocks(e){for(let t=0;t<e;t++){const s=document.createElement("div");s.className="score-block",this.scoreSectionEl.appendChild(s)}}resetScoreBlocks(e){for(let t=0;t<e;t++)this.scoreSectionEl.children[t].style.backgroundColor="rgba(241, 245, 249, 0.5)"}updateScoreBlocks(e,t,s){if(s==="TEST")t?this.scoreSectionEl.children[e].style.backgroundColor="#86efac":this.scoreSectionEl.children[e].style.backgroundColor="#f87171";else return}renderQuestion(e){this.gameOverEl.textContent="",this.questionEl.textContent=e.text,this.answersEl.innerHTML="",this.currentAnswerButtons=[],e.options.forEach(t=>{const s=document.createElement("button");s.className="answer-button",s.textContent=t.text,s.dataset.optionId=String(t.id),s.onclick=()=>{var r;return(r=this.onAnswerSelected)==null?void 0:r.call(this,t.id)},this.answersEl.appendChild(s),this.currentAnswerButtons.push(s)})}renderTimer(e,t){const s=Math.max(0,Math.min(1,t));this.timeBarFillEl.style.width=`${s*100}%`}renderBlurEffect(e="LEARN"){this.isBlured?(this.isBlured=!1,this.gameHeaderEl.style.filter="blur(0px)",this.currentAnswerButtons.forEach(t=>{t.style.filter="blur(0px)"}),this.scoreSectionEl.style.filter="blur(0px)",this.replayButtonEl.style.filter="blur(0px)"):this.isBlured||(this.isBlured=!0,this.gameHeaderEl.style.filter="blur(10px)",this.currentAnswerButtons.forEach(t=>{t.style.filter="blur(10px)"}),e==="LEARN"&&(this.scoreSectionEl.style.filter="blur(10px)",this.replayButtonEl.style.filter="blur(10px)"))}renderScore(e){}renderMotivator(e,t){t==n.MARIE?this.renderMarie(e):t==n.TERMINATOR?this.renderTerminator(e):t==n.TROPHY&&this.renderTrophy(e)}setTheme(e){e==n.MARIE?(this.terminatorWrapperEl.classList.add("hidden"),this.medalsContainerEl.classList.add("hidden")):e==n.TERMINATOR?(this.marieImageEl.classList.add("hidden"),this.medalsContainerEl.classList.add("hidden")):e==n.TROPHY&&(this.marieImageEl.classList.add("hidden"),this.terminatorWrapperEl.classList.add("hidden"),this.medalsContainerEl.classList.remove("hidden")),this.gameStart=!1}renderGameOver(e,t,s){this.gameOverEl.textContent="",e&&this.renderMotivator(1,t),e||this.renderMotivator(0,t),this.currentAnswerButtons.forEach(r=>{r.disabled=!0}),s==="TEST"&&this.replayButtonEl.classList.remove("hidden")}renderCorrectAnswerIndex(e){this.currentAnswerButtons.forEach(t=>{const s=Number(t.dataset.optionId);t.disabled=!0,s===e&&t.classList.add("answer-button--correct")})}renderQuestionIndex(e,t){this.questionIndexEl.textContent=`Frage: ${e}/${t}`}renderPhase(e){this.phaseLabelEl.textContent=e==="LEARN"?"Lernphase":"Prüfphase",this.skipLearnButtonEl.disabled=e!=="LEARN",e==="TEST"&&(this.phaseLabelEl.style.color="red"),e==="LEARN"?this.rightPanelEl.style.filter="blur(10px)":e==="TEST"&&(this.rightPanelEl.style.filter="blur(0px)")}hideReplayButton(){this.replayButtonEl.classList.add("hidden")}renderNewExplainText(e){this.explainTextEl.textContent=e}renderMarie(e){var r;this.gameStart&&this.setTheme(n.MARIE);const t=this.motivatorThemes[n.MARIE];let s;e<=.3?s="sauer":e<=.6?s="enttäuscht":e<=.9?s="zufrieden":s="strahlend",s!==this.currentMood&&(this.currentMood=s,this.marieImageEl.src=((r=t.marieImages)==null?void 0:r[s])??"",this.marieImageEl.alt=`Marie Curie (${s})`)}renderTerminator(e){this.gameStart&&this.setTheme(n.TERMINATOR);const t=250,s=240;let r=e*t;this.rightPipeEl.style.height=`${r}px`,this.leftPipeEl.style.height=`${r}px`,this.pressPlateEl.style.top=`${r+s}px`,console.log(r),r<75?this.terminatorEl.style.transform="scaleY(1)":r==75?this.terminatorEl.style.transform="scaleY(0.9)":r==100?this.terminatorEl.style.transform="scaleY(0.85)":r==125?this.terminatorEl.style.transform="scaleY(0.8)":r==150?this.terminatorEl.style.transform="scaleY(0.7) scaleX(1.2)":r==175?this.terminatorEl.style.transform="scaleY(0.6) scaleX(1.3)":r==200?this.terminatorEl.style.transform="scaleY(0.5) scaleX(1.35)":r==225?this.terminatorEl.style.transform="scaleY(0.2) scaleX(1.4)":r==250&&(this.terminatorEl.style.transform="scaleY(0.1) scaleX(1.45)"),e==1&&setTimeout(()=>{this.explosionVideoEl.play()},200)}renderTrophy(e){this.gameStart&&this.setTheme(n.TROPHY);const t=.3,s=.6,r=1;e>=t?this.bronzeMedalEl.classList.add("medal-earned"):this.bronzeMedalEl.classList.remove("medal-earned"),e>=s?this.silverMedalEl.classList.add("medal-earned"):this.silverMedalEl.classList.remove("medal-earned"),e>=r?this.goldMedalEl.classList.add("medal-earned"):this.goldMedalEl.classList.remove("medal-earned")}}class x{constructor(e){i(this,"questions");i(this,"questionTotalNumber");i(this,"currentQuestionIndex",0);this.questions=e,this.questionTotalNumber=e.length}getCorrectAnswer(){return this.questions[this.currentQuestionIndex].correctOptionId}setQuestionsToTestPhase(){this.currentQuestionIndex=0}setNextQuestion(){this.currentQuestionIndex++}getQuestion(){return this.questions[this.currentQuestionIndex]}getCurrentQuestionIndex(){return this.currentQuestionIndex}getQuestionTotalNumber(){return this.questionTotalNumber}isLastQuestion(){return this.getCurrentQuestionIndex()+1>=this.getQuestionTotalNumber()}resetQuestions(){this.currentQuestionIndex=0}}class T{constructor(){i(this,"config");i(this,"scoreSystem");i(this,"timer");i(this,"ui");i(this,"questionHandler");i(this,"tickIntervalId",null);i(this,"currentPhase","LEARN");i(this,"mode",n.TROPHY);i(this,"blurTimeoutId",null);i(this,"DELAY_TIME",0);i(this,"FIRSTQU_DELAY_TIME",0);i(this,"questionAnswered",!1);this.questionHandler=new x(m),this.ui=new g,this.ui.setAnswerHandler(e=>this.processAnswer(e)),this.ui.onSkipLearn=()=>this.skipLearningPhase(),this.ui.onReplay=()=>this.restartGame(),this.ui.onGameModeSelected=e=>{this.mode=e,this.ui.renderGameShell(e),this.ui.renderExplainShell(e)},this.ui.onStartButtonClicked=()=>this.start(),this.config=h,this.scoreSystem=new E,this.timer=new p(this.config.MsPerQuestion)}start(){this.ui.renderEndExplainShell(),this.currentPhase="LEARN",this.timer.startQuestionTimer(),this.getQuestion(this.FIRSTQU_DELAY_TIME),this.startGameLoop()}restartGame(){this.scoreSystem.reset(),this.timer.startQuestionTimer(),this.getQuestion(this.FIRSTQU_DELAY_TIME),this.startGameLoop(),this.questionHandler.resetQuestions(),this.ui.resetScoreBlocks(this.config.totalQuestions),this.questionAnswered=!1,this.ui.hideReplayButton(),this.ui.renderMotivator(this.scoreSystem.getScorePercent(),this.mode)}stopGameloop(){this.tickIntervalId!==null&&(clearInterval(this.tickIntervalId),this.tickIntervalId=null)}skipLearningPhase(){this.stopGameloop(),this.currentPhase="TEST",this.getQuestion(this.FIRSTQU_DELAY_TIME),this.questionHandler.setQuestionsToTestPhase()}startGameLoop(){this.stopGameloop(),this.tickIntervalId=window.setInterval(()=>{this.checkIfGameOver(),this.uiForEveryTick(),this.timer.hasTimeLeft()||this.processAnswer(-1)},50)}uiForEveryTick(){this.ui.renderQuestionIndex(this.questionHandler.getCurrentQuestionIndex()+1,this.questionHandler.getQuestionTotalNumber()),this.ui.renderPhase(this.currentPhase),this.ui.renderTimer(this.timer.getRemainingMs()/1e3,this.timer.getRemainingFraction())}checkIfGameOver(){let e=!1;return this.questionAnswered&&this.questionHandler.isLastQuestion()&&this.currentPhase=="TEST"&&(console.log("ich werde durchlaufen"),this.stopGameloop(),this.endGame(),e=!0),e}getQuestion(e){this.ui.renderBlurEffect(this.currentPhase),setTimeout(()=>{this.ui.renderBlurEffect(this.currentPhase);const t=this.questionHandler.getQuestion();this.ui.renderQuestion(t),this.timer.startQuestionTimer(),this.startGameLoop()},e)}processAnswer(e){const t=this.questionHandler.getCorrectAnswer()==e;if(this.stopGameloop(),this.questionAnswered=!0,this.ui.renderCorrectAnswerIndex(this.questionHandler.getCorrectAnswer()),this.ui.updateScoreBlocks(this.questionHandler.getCurrentQuestionIndex(),t,this.currentPhase),this.scoreSystem.applyAnswer(t,this.currentPhase),this.ui.renderScore(this.scoreSystem.getScorePercent()),this.ui.renderMotivator(this.scoreSystem.getScorePercent(),this.mode),this.questionHandler.isLastQuestion()&&this.currentPhase==="LEARN")this.questionHandler.setQuestionsToTestPhase(),this.currentPhase="TEST";else if(this.questionHandler.isLastQuestion()&&this.currentPhase==="TEST"){this.stopGameloop(),this.endGame();return}else this.questionHandler.setNextQuestion();this.questionAnswered=!1,!this.checkIfGameOver()&&this.getQuestion(this.DELAY_TIME)}endGame(){let e=!1;this.scoreSystem.getScorePercent()===1&&(e=!0),this.ui.renderGameOver(e,this.mode,this.currentPhase)}}function d(){new T}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();
